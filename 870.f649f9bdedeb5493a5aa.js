"use strict";(self.webpackChunkcalculator=self.webpackChunkcalculator||[]).push([[870],{870:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S,defaultSetItem:()=>I,getBonusSetObjects:()=>j});var a=s(893),n=s(294);const l="iM4Sf1YT";var r=s(828),i=s(181);var o=s(612);const c="ZcaWq7O2",u="IGpuRSmZ",d="jDlxYzT7";var h=s(760),f=s(814),m=s(245),p=s(843),g=s(203);let k=[];function v(e,t){for(const s of t)e.push((0,a.jsx)("option",{value:s,children:g.Z.en[s]},s))}function b(e){const t=[];if(e)for(const s of e)t.push((0,a.jsx)("option",{value:s,children:g.Z.en[s]},s));return t}v(k,[...o.IB]),v(k,[...h.vW]),v(k,[...o.CV]);const N=e=>{const t=(0,f.hU)(e.set.key);let s=t?parseFloat((100*e.set.value).toFixed(2)):e.set.value,l=0,r=[],i=[];const o="dmgIncrease"===e.set.key||"dmgTakenIncrease"===e.set.key||"elemIncrease"===e.set.key||"resPen"===e.set.key||"resReduction"===e.set.key;o&&(r=b([...f.xw]),i=b("dot"===e.set.atkTypeOption?[...f.YU]:[...f.U6]));const h=t?(0,a.jsx)(p.E,{}):(0,a.jsx)(n.Fragment,{}),g=t?void 0:{width:"8.5em"};return(0,a.jsxs)("div",{className:"VaKqXHgu",children:[(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("section",{className:u,children:(0,a.jsx)("select",{value:e.set.key,className:"A8SUHbjF",onInput:t=>{t.persist(),e.changeCallback(e.set.id,t.currentTarget.value,void 0,void 0,void 0)},children:k},"main"+l++)}),(0,a.jsxs)("section",{className:u,children:[(0,a.jsx)("input",{style:g,value:s,className:"Tkd8Cb7k",type:"number",placeholder:"0",onKeyDown:e=>{m.q.isValidKeyInput(e.key,t)||e.preventDefault()},onChange:s=>{const a=function(e,t){return m.$.getValidatedStatData(e,t)}(s.target.value,t);s.target.value=a.valueAsString,e.changeCallback(e.set.id,void 0,Number(a.valueAsNumber)??0,void 0,void 0)}},"value"+l++),h]})]}),(0,a.jsx)("button",{className:"w0NVpLFW",onClick:t=>e.clearCallback(e.set.id),children:"x"}),o?(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("section",{className:u,children:(0,a.jsx)("select",{value:e.set.atkTypeOption,className:d,disabled:0===r.length,onInput:t=>{t.persist(),e.changeCallback(e.set.id,void 0,void 0,t.currentTarget.value,void 0)},children:r},"add"+l++)}),(0,a.jsx)("section",{className:u,children:(0,a.jsx)("select",{value:e.set.elemTypeOption,className:d,disabled:0===i.length,onInput:t=>{t.persist(),e.changeCallback(e.set.id,void 0,void 0,void 0,t.currentTarget.value)},children:i},"add"+l++)})]}):(0,a.jsx)(n.Fragment,{})]})},y=e=>{const t=function(e){let t=0;if(e&&e.set&&Object.keys(e.set).length>0){let s=[];for(const n of e.set)s.push((0,a.jsx)(N,{set:{...n},changeCallback:e.addBonusCallback,clearCallback:e.deleteBonusCallback},`item-${t}`)),t++;return s}return[]}(e),s=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const e=s.current?.scrollHeight;s.current?.scrollTo(0,e)}),[e]),(0,a.jsxs)("div",{className:"kZBiILxd",children:[(0,a.jsx)("p",{className:"_hoVUm_0",children:"Edit set:"}),(0,a.jsxs)("div",{className:"OSAdLtG_",ref:s,children:[t,(0,a.jsx)("button",{onClick:()=>e.addBonusCallback(e.set.length,I.key,I.value,I.atkTypeOption,I.elemTypeOption),children:"Add"})]})]})};function x(e){if(!e)throw new Error("Invalid key");const t={atkTypeOption:"none",elemTypeOption:"none"};return"dmgIncrease"!==e&&"dmgTakenIncrease"!==e&&"elemIncrease"!==e&&"resPen"!==e&&"resReduction"!==e||(t.atkTypeOption=f.xw[0],t.elemTypeOption=f.U6[0]),t}const I={id:0,key:"dmgIncrease",value:1,atkTypeOption:"any",elemTypeOption:"all"};function j(){let e=new Map;for(const t of r.My){const s=JSON.parse(localStorage.getItem(r.Zu+t));s&&e.set(t,s)}return e}const S=()=>{const[e,t]=(0,n.useState)(j()),[s,o]=(0,n.useState)([I]),c=()=>{t((()=>j()))};return(0,a.jsx)("div",{className:"Non7k_5S",children:(0,a.jsxs)("div",{className:"_vH_XDO1",children:[(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)(r.od,{set:s,updateCallback:c}),(0,a.jsx)(i.Cg,{list:e,loadCallback:e=>{o(e)},updateCallback:c})]}),(0,a.jsx)("div",{className:l,children:(0,a.jsx)(y,{set:s,addBonusCallback:(e,t,s,a,n)=>{(t||!Number.isNaN(Number(s))||a||n)&&o((l=>function(e,t,s,a,n,l){if(!s&&Number.isNaN(Number(a))&&!n&&!l||Number.isNaN(Number(t)))throw new Error("Something went wrong! origin: getBonusSet()");const r=e.find((e=>e.id===t));if(r){const i=e.indexOf(r),o=[...e],c=s??r.key;let u=Number.isNaN(Number(a))?r.value:Number(a);s&&(0,f.hU)(r.key)!==(0,f.hU)(s)&&(u=0);let d=n??r.atkTypeOption,h=l??r.elemTypeOption;if(s){const e=x(s);d=e.atkTypeOption,h=e.elemTypeOption}return"dot"!==n||f.Wv.includes(l)||(h=f.YU[0]),o[i]={id:t,key:c,value:u,atkTypeOption:d,elemTypeOption:h},o}{if(Number.isNaN(Number(t)))throw new Error("Invalid ID for new set");const n=s??"crrate",l=Number.isNaN(Number(a))?0:Number(a),r=x(s),i=r.atkTypeOption,o=r.elemTypeOption;return[...e,{id:t,key:n,value:l,atkTypeOption:i,elemTypeOption:o}]}}(l,e,t,s,a,n)))},deleteBonusCallback:e=>{Number.isNaN(Number(e))||o((t=>{const s=t.findIndex((t=>t.id===e));if(-1===s)return alert("There's no bonus to delete"),t;let a=[...t];a.splice(s,1);let n=0;return console.log(a),a=a.map((e=>({...e,id:n++}))),console.log(a),a}))}})})]})})}},828:(e,t,s)=>{s.d(t,{od:()=>i,My:()=>r,Zu:()=>l});var a=s(893),n=s(294);const l="bonusset-",r=["weapon","teammate","relics","planars"],i=e=>{const t=(0,n.useRef)(null),s=(0,n.useRef)(null);let i=[];for(const e of r)i.push((0,a.jsx)("option",{value:e,children:e},e));return(0,a.jsxs)("div",{className:"vSLIrJuG",children:[(0,a.jsx)("p",{className:"ElObydME",children:"Save set:"}),(0,a.jsxs)("div",{className:"U0roux2R",children:[(0,a.jsxs)("select",{ref:t,defaultValue:"none",children:[(0,a.jsx)("option",{hidden:!0,disabled:!0,value:"none",children:"-select type-"}),i]}),(0,a.jsx)("input",{ref:s,maxLength:20,type:"text",placeholder:"Type the name of set"}),(0,a.jsx)("button",{onClick:a=>{t.current&&"none"!==t.current.value||console.log("Please select the type of set!"),s.current&&""!==s.current.value||console.log("Please input the name of set!"),e.set&&0!==e.set.length||console.log("Current set is invalid");const n=localStorage.getItem(l+t.current.value),r=n?JSON.parse(n):{},i=s.current.value.trim(),o=t.current.value;if(r[i]&&0!==r[i].length&&!confirm("Current set already exists. Do you want to override it?"))return;delete r[i],r[i]=e.set;const c=JSON.stringify(r);localStorage.setItem(l+o,c),e.updateCallback()},children:"Save"})]})]})}},181:(e,t,s)=>{s.d(t,{Cg:()=>c,AA:()=>o,_K:()=>i});var a=s(893),n=s(294),l=s(828);var r=s(203);function i(e){if(!e)return console.log("Parameter is invalid in getSelectorGroupName"),null;if(e.multiple)return console.log("getSelectorGroupName is working only with non-multiple select element"),null;if(e.selectedOptions[0]?.parentElement instanceof HTMLOptGroupElement){const t=e.selectedOptions[0].parentElement,s=e.selectedOptions[0].value;return{groupName:t.id,value:s}}return console.log("Something went wrong in 'getSelectorGroupName' function"),{groupName:null,value:null}}function o(e,t){const s=[];for(const[n,l]of e)if(!t||t.includes(n)||0===t.length){const e=[];for(const t of Object.keys(l))e.push((0,a.jsx)("option",{value:t,children:t},t));s.push((0,a.jsx)("optgroup",{id:n,label:r.Z.en[n],children:e},n))}return s}const c=e=>{const t=(0,n.useRef)(null),s=o(e.list)??[];return(0,a.jsxs)("div",{className:"e8819BNZ",children:[(0,a.jsx)("p",{className:"GLlbHPAN",children:"Your sets:"}),(0,a.jsxs)("div",{className:"XN7ZxQBF",children:[(0,a.jsx)("button",{onClick:()=>{const s=e.list,{groupName:a,value:n}=i(t.current);if(a&&n&&s.get(a)){const t=e.list.get(a)[n];t&&confirm("Do you want to load set? It will reset current preset.")&&e.loadCallback(t)}},children:"Load"}),(0,a.jsx)("button",{onClick:()=>{const s=e.list,{groupName:a,value:n}=i(t.current);if(a&&n&&s.get(a)){const t=function(e,t){const s=JSON.parse(e??null);return s||(console.log("Error when parsing selected set!"),null)}(localStorage.getItem(l.Zu+a));delete t[n];const s=JSON.stringify(t);0===Object.keys(t).length?localStorage.removeItem(l.Zu+a):localStorage.setItem(l.Zu+a,s),e.updateCallback()}},children:"Delete"})]}),(0,a.jsx)("select",{ref:t,className:"On3iX0ix",name:"fruit",size:10,children:s})]})}},612:(e,t,s)=>{s.d(t,{CV:()=>a,IB:()=>n,zk:()=>l});const a=["baseatk","basehp","basedef"],n=["crrate","crdmg","atkIncrease","hpIncrease","defIncrease","flatatk","flathp","flatdef","dmgIncrease","elemIncrease","defIgnore","resPen"];class l{constructor(e="basic",t="fire",s="atk",a={multiplier:0,baseatk:0,basehp:0,basedef:0},n={crrate:.05,crdmg:.5,flatatk:352,flathp:0,flatdef:0,breakeffect:0,atkIncrease:0,hpIncrease:0,defIncrease:0,elemIncrease:0,dmgIncrease:0,defIgnore:0,resPen:0}){this.atkType=e??"basic",this.element=t??"fire",this.srcStat=s??"atk";for(const e of Object.keys({multiplier:0,baseatk:0,basehp:0,basedef:0}))void 0===a[e]&&(a[e]=0);this.stats=a;for(const e of Object.keys({crrate:.05,crdmg:.5,flatatk:352,flathp:0,flatdef:0,breakeffect:0,atkIncrease:0,hpIncrease:0,defIncrease:0,elemIncrease:0,dmgIncrease:0,defIgnore:0,resPen:0}))void 0===n[e]&&(n[e]=0,console.log());this.buffs=n}getCharObj(){return{atkType:this.atkType,element:this.element,srcStat:this.srcStat,stats:this.stats,buffs:this.buffs}}getCharTotalAtk(){return Math.floor(this.stats[`base${this.srcStat}`]*(1+this.buffs[`${this.srcStat}Increase`])+this.buffs[`flat${this.srcStat}`])}}},760:(e,t,s)=>{s.d(t,{C8:()=>n,vW:()=>a});const a=["defReduction","resReduction","dmgTakenIncrease"];class n{constructor(e=95,t="fire",s={hp:0,def:0,res:0},a={defReduction:0,resReduction:0,dmgTakenIncrease:0},n=!1){this._lvl=e,this._element=t,this._stats=s,this._debuffs=a,this._isBroken=n,this.updateDefByLvl()}updateDefByLvl(){this._stats.def=200+10*this._lvl}get lvl(){return this._lvl}get element(){return this._element}get stats(){return this._stats}get debuffs(){return this._debuffs}get isBroken(){return this._isBroken}set lvl(e){this._lvl=e,this.updateDefByLvl()}set element(e){this._element=e}set stats(e){this._stats=e}set debuffs(e){this._debuffs=e}set isBroken(e){this._isBroken=e}getEnemyObj(){return{lvl:this.lvl,element:this.element,stats:this.stats,debuffs:this._debuffs,isBroken:this._isBroken}}}},843:(e,t,s)=>{s.d(t,{E:()=>n});var a=s(893);const n=e=>(0,a.jsx)("p",{className:"J6P9uriy",children:"%"})},177:(e,t,s)=>{s.d(t,{d:()=>a,l:()=>n});const a=["atk","hp","def"],n=["fire","ice","lightning","physical","quantum","imaginary","wind"]},814:(e,t,s)=>{s.d(t,{U6:()=>r,Wv:()=>n,YU:()=>l,cE:()=>i,hU:()=>c,xw:()=>o});var a=s(177);const n=["fire","lightning","physical","wind"],l=["all",...n],r=["all",...a.l],i=["basic","skill","ultimate","talent","dot","follow-up"],o=["any",...i];function c(e){return!["baseatk","basehp","basedef","flatatk","flathp","flatdef","lvl","def"].includes(e)}},203:(e,t,s)=>{s.d(t,{Z:()=>a});const a={en:{multiplier:"Multiplier",atkType:"Attack type",element:"Element",srcStat:"Dmg source",baseatk:"Base Atk",basehp:"Base HP",basedef:"Base Def",crrate:"Crit.rate",crdmg:"Crit DMG",flatatk:"Flat Atk",flathp:"Flat HP",flatdef:"Flat Def",breakeffect:"Break effect",atkIncrease:"Atk%",hpIncrease:"HP%",defIncrease:"Def%",elemIncrease:"Elemental%",dmgIncrease:"Dmg%",defIgnore:"Def Ignore",resPen:"Res PEN",defReduction:"Def Reduction",resReduction:"Res Reduction",dmgTakenIncrease:"Dmg Taken%",basic:"Basic",skill:"Skill",ultimate:"Ultimate",talent:"Talent","follow-up":"Follow-up",dot:"DoT",any:"Any",fire:"Fire",lightning:"Lightning",physical:"Physical",wind:"Wind",ice:"Ice",quantum:"Quantum",imaginary:"Imaginary",all:"All",weapon:"Weapon",teammate:"Teammate",relics:"Relic",planars:"Planar",other:"Other"}}},245:(e,t,s)=>{s.d(t,{$:()=>a,q:()=>n});class a{static invalidCharsValidation(e){for(const t of this.invalidChars)e.replace(t,"");return e}static emptyValidation(e){return""===e?"0":e}static startWithZeroValidation(e){if(e.startsWith("0")&&!e.startsWith("0.")&&e.length>1){let t=1;for(;t<e.length-1&&"0"===e[t];)t++;return e.slice(t,e.length)}return e}static maxFloatLengthValidation(e){return e.split(".")[1]?.length>2&&(e=e.slice(0,e.length-1)),e.split(".")[0]?.length>6&&e.split(".")[1]&&(e=e.slice(1,e.length)),e.length>9&&(e=e.slice(0,e.length-1)),e}static maxIntegerLengthValidation(e){const t=e.indexOf("."),s=e.indexOf(",");if(-1!==t||-1!==s){const a=Math.min(-1===t?9:t,-1===s?9:s);e=e.slice(0,a)}return e.length>9&&(e=e.slice(0,e.length-1)),e}static parseStringValueToPercentFloat(e){return isNaN(Number(e))?0:Number((Number(e)/100).toFixed(4))}static parseStringValueToInteger(e){return isNaN(parseInt(e))?(console.log("Can't parse current value: "+e.toString()),0):parseInt(e)}static getValidatedStatData(e,t){return""===e?{valueAsString:"",valueAsNumber:0}:(e=a.invalidCharsValidation(e),e=a.startWithZeroValidation(e),{valueAsString:e=t?a.maxFloatLengthValidation(e):a.maxIntegerLengthValidation(e),valueAsNumber:t?a.parseStringValueToPercentFloat(e):a.parseStringValueToInteger(e)})}}a.invalidChars=["+","e","-"];class n{static isValidKeys(e){return!("-"===e||"+"===e||"e"===e)}static isValidLocaleSeparator(e){const t=n.localeDecimalSeparator;return!(("."===e||","===e)&&t!==e)}static isValidFormat(e,t){return!(n.localeDecimalSeparator===e&&!t)}static isValidKeyInput(e,t){return n.isValidKeys(e)&&n.isValidLocaleSeparator(e)&&n.isValidFormat(e,t)}}n.localeDecimalSeparator=1.1.toLocaleString().substring(1,2)}}]);
//# sourceMappingURL=870.f649f9bdedeb5493a5aa.js.map