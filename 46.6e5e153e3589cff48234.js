"use strict";(self.webpackChunkcalculator=self.webpackChunkcalculator||[]).push([[46,221],{196:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$});var a=s(893),n=s(294);const c="FsnFMGRC",l="BHYZdv6n",r="wg5y91ca",o="jEh6KE4N",i=(0,n.memo)((e=>{const t=Math.floor(e.result[0]),s=Math.floor(e.result[1]),n=Math.floor(e.result[2]);return(0,a.jsxs)("div",{className:"A3Hfsa7r",children:[(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("p",{className:r,children:"Damage"}),(0,a.jsx)("p",{className:o,children:t})]}),(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("p",{className:r,children:"Crit.Dmg"}),(0,a.jsx)("p",{className:o,children:s})]}),(0,a.jsxs)("div",{className:l,style:{borderBottom:"none"},children:[(0,a.jsx)("p",{className:r,children:"Avg.Dmg"}),(0,a.jsx)("p",{className:o,children:n})]})]})}),(function(e,t){return e.result[0]===t.result[0]&&e.result[1]===t.result[1]&&e.result[2]===t.result[2]})),u="YasIwRBF";var d=s(814);const m={multiplier:"Dmg multiplier",crrate:"Crit. rate%",crdmg:"Crit.DMG%",baseatk:"Base Atk",basehp:"Base HP",basedef:"Base Def",flatatk:"Flat Atk",flathp:"Flat HP",flatdef:"Flat Def",atkIncrease:"Atk%",hpIncrease:"HP%",defIncrease:"Def%",elemIncrease:"ElementDmg%",dmgIncrease:"Dmg%",defIgnore:"Def Ignore",resPen:"Res Pen"},p={lvl:"Level",res:"Res%",def:"Defense",defReduction:"Def reduction%",resReduction:"Res reduction%",dmgTakenIncrease:"More DMG taken%",brokenMultiplier:"Is broken"};var h=s(245),v=s(843);const f=(0,n.memo)((function(e){const t=(0,d.hU)(e.statType);let s=t?parseFloat((100*e.value).toFixed(2)):e.value;const c=(0,n.useRef)(null),l=function(e){return-1!==Object.keys(m).indexOf(e)}(i=e.statType)?m[i]:function(e){return-1!==Object.keys(p).indexOf(e)}(i)?p[i]:"null",r=t?(0,a.jsx)(v.E,{}):(0,a.jsx)(n.Fragment,{}),o=t?void 0:{width:"8em"};var i;return(0,a.jsxs)("div",{className:"GmOFNj5O",children:[(0,a.jsx)("p",{children:l}),(0,a.jsxs)("div",{className:"E2vIMxre",children:[(0,a.jsx)("input",{ref:c,className:"Xkfy_Axq",style:o,onKeyDown:e=>{h.q.isValidKeyInput(e.key,t)||e.preventDefault()},onChange:s=>{const a=h.$.getValidatedStatData(s.target.value,t);s.target.value=a.valueAsString,e.changeCallback(e.statType,a.valueAsNumber)},type:"number",value:s}),r]})]})}),((e,t)=>e.value===t.value&&e.changeCallback===t.changeCallback));var x=s(177),y=s(612);const j=e=>{const t=e.char.atkType,s=e.char.srcStat,n=e.char.element,c=e.char.stats,l=e.char.buffs;let r=function(e){switch(e){case"hp":return{percent:"hpIncrease",base:"basehp",flat:"flathp"};case"atk":return{percent:"atkIncrease",base:"baseatk",flat:"flatatk"};case"def":return{percent:"defIncrease",base:"basedef",flat:"flatdef"}}}(e.char.srcStat);const o=(a,r)=>{e.onCharChanged(new y.zk(t,n,s,{...c,[a]:r},l))},i=(a,r)=>{e.onCharChanged(new y.zk(t,n,s,c,{...l,[a]:r}))};let m=[];for(const e of d.cE)m.push((0,a.jsx)("option",{value:e,children:e[0].toUpperCase()+e.substring(1)},e));let p=[];for(const e of x.d)p.push((0,a.jsx)("option",{value:e,children:e[0].toUpperCase()+e.substring(1)},e));let h=[];for(const e of x.l)h.push((0,a.jsx)("option",{value:e,children:e[0].toUpperCase()+e.substring(1)},e));return(0,a.jsxs)("div",{className:"Fw3CYGUT",children:[(0,a.jsx)("p",{className:"bE4xNV7Y",children:"Character:"}),(0,a.jsxs)("section",{className:u,children:[(0,a.jsx)("label",{htmlFor:"atkType",children:"Atk type:"}),(0,a.jsx)("select",{id:"atkType",value:t,onInput:t=>{const a=t.currentTarget.value;e.onCharChanged(new y.zk(a,n,s,c,l))},children:m})]}),(0,a.jsxs)("section",{className:u,children:[(0,a.jsx)("label",{htmlFor:"sourceStat",children:"Dmg source:"}),(0,a.jsx)("select",{id:"sourceStat",value:s,onInput:s=>{const a=s.currentTarget.value;e.onCharChanged(new y.zk(t,n,a,c,l))},children:p})]}),(0,a.jsxs)("section",{className:u,children:[(0,a.jsx)("label",{htmlFor:"elementDmgType",children:"Element:"}),(0,a.jsx)("select",{id:"elementDmgType",value:n,onInput:a=>{const n=a.currentTarget.value;e.onCharChanged(new y.zk(t,n,s,c,l))},children:h})]}),(0,a.jsxs)("p",{className:"iQdbwc3M",children:["Total ",s,": ",e.char.getCharTotalAtk()]}),(0,a.jsx)(f,{value:c[r.base],statType:r.base,changeCallback:o},"base"),(0,a.jsx)(f,{value:l[r.percent],statType:r.percent,type:"percent",changeCallback:i},"percent"),(0,a.jsx)(f,{value:l[r.flat],statType:r.flat,changeCallback:i},"flat"),(0,a.jsx)(f,{value:c.multiplier,statType:"multiplier",type:"percent",changeCallback:o},"multiplier"),(0,a.jsx)(f,{value:l.crrate,statType:"crrate",type:"percent",changeCallback:i},"crrate"),(0,a.jsx)(f,{value:l.crdmg,statType:"crdmg",type:"percent",changeCallback:i},"crdmg"),(0,a.jsx)(f,{value:l.dmgIncrease,statType:"dmgIncrease",type:"percent",changeCallback:i},"dmgIncrease"),(0,a.jsx)(f,{value:l.elemIncrease,statType:"elemIncrease",type:"percent",changeCallback:i},"elemIncrease"),(0,a.jsx)(f,{value:l.defIgnore,statType:"defIgnore",type:"percent",changeCallback:i},"defIgnore"),(0,a.jsx)(f,{value:l.resPen,statType:"resPen",type:"percent",changeCallback:i},"resPen")]})};var b=s(760);const g=e=>{const t=e.enemy.lvl,s=e.enemy.element,n=e.enemy.stats,c=e.enemy.debuffs,l=e.enemy.isBroken,r=(a,r)=>{e.onChangeCallback(new b.C8(t,s,n,{...c,[a]:r},l))};return(0,a.jsxs)("div",{className:"pv_lrO39",children:[(0,a.jsx)("p",{className:"nOoKx0bq",children:"Enemy:"}),(0,a.jsx)(f,{value:t,statType:"lvl",changeCallback:(t,a)=>{e.onChangeCallback(new b.C8(a,s,n,c,l))}},"lvl"),(0,a.jsx)(f,{value:n.res,statType:"res",type:"percent",changeCallback:(a,r)=>{e.onChangeCallback(new b.C8(t,s,{...n,[a]:r},c,l))}},"res"),(0,a.jsx)(f,{value:c.defReduction,statType:"defReduction",type:"percent",changeCallback:r},"defReduction"),(0,a.jsx)(f,{value:c.resReduction,statType:"resReduction",type:"percent",changeCallback:r},"resReduction"),(0,a.jsx)(f,{value:c.dmgTakenIncrease,statType:"dmgTakenIncrease",type:"percent",changeCallback:r},"dmgTakenIncrease"),(0,a.jsxs)("section",{className:"aMElhAzu",children:[(0,a.jsx)("label",{htmlFor:"isBrokenCheck",children:"Is enemy broken?"}),(0,a.jsx)("input",{id:"isBrokenCheck",type:"checkbox",checked:e.enemy.isBroken,onChange:a=>{var l;l=a.currentTarget.checked,e.onChangeCallback(new b.C8(t,s,n,c,l))}})]})]})};function k(e,t,s,a){return e.filter((e=>!(e.key!==t||e.atkTypeOption!==(s??e.atkTypeOption)&&"any"!==e.atkTypeOption||e.elemTypeOption!==(a??e.elemTypeOption)&&"all"!==e.elemTypeOption))).map((e=>e.value)).reduce(((e,t)=>e+t),0)}const C=(e,t,s)=>{if(!e||!t||!s)return[0,0,0];const a=[];s.data.forEach((e=>{e.forEach((e=>{e.isActive&&e.items.forEach((e=>{e.isActive&&a.push(e)}))}))}));const n=e.stats,c=e.buffs,l=t.stats,r=t.debuffs,o=t.isBroken?1:.9,i=k(a,`base${e.srcStat}`),u=k(a,`${e.srcStat}Increase`),d=k(a,`flat${e.srcStat}`),m=((n[`base${e.srcStat}`]+i)*(1+c[`${e.srcStat}Increase`]+u)+c[`flat${e.srcStat}`]+d)*n.multiplier,p=k(a,"dmgIncrease",e.atkType,e.element),h=k(a,"elemIncrease",e.atkType,e.element),v=1+c.dmgIncrease+c.elemIncrease+p+h,f=k(a,"defReduction"),x=k(a,"defIgnore");let y=t.stats.def*(1-(r.defReduction+f+c.defIgnore+x));y<0&&(y=0);const j=1-y/(y+200+800),b=k(a,"resPen",e.atkType,e.element),g=k(a,"resReduction",e.atkType,e.element);let C=(l.res>.9?.9:l.res)-(r.resReduction+g+(c.resPen+b));C<-1&&(C=-1);const N=1-C,S=k(a,"dmgTakenIncrease",e.atkType,e.element),T=1+r.dmgTakenIncrease+S,w=k(a,"crrate"),A=e.buffs.crrate+w>1?1:e.buffs.crrate+w,I=k(a,"crdmg"),B=m*v*j*N*T*o,E=B*(1+(c.crdmg+I));return[B,E,B+(E-B)*A]},N={dataStoreModule:"S4JsCCMW",headerSection:"EvNGSMKL",header:"BF3LQWwe",statusText:"uFyQc1uJ",saveSection:"cYnI8pBL",inputSave:"XGBjHG1u",loadSection:"ZkziKZdr",loadSectionButtons:"PW_9OVG_",importExportSection:"m4BerNsd"};var S=s(394),T=s(773);function w(e){if(!e)return[];const t=[];for(const s of Object.keys(e).sort())t.push((0,a.jsx)("option",{className:N.options,children:s},s));return t}function A(e){return 0===Object.keys(e).length}function I(e,t){let s=t,a=0;for(;e[s];){if(a>999)throw new Error("Something went wrong with indexing new setup");a++,s=t.concat("(",a.toString(),")")}return s}const B=(0,n.memo)((e=>{const t=JSON.parse(localStorage[S.Pc]??null),[s,c]=(0,n.useState)(w(t)),l=(0,n.useRef)(null),r=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,a.jsxs)("div",{className:N.dataStoreModule,children:[(0,a.jsxs)("div",{className:N.headerSection,children:[(0,a.jsx)("p",{className:N.header,children:"Save/Load:"}),(0,a.jsx)("div",{ref:o,className:N.statusText})]}),(0,a.jsxs)("div",{className:N.saveSection,children:[(0,a.jsx)("input",{ref:l,maxLength:20,className:N.inputSave}),(0,a.jsx)("button",{onClick:()=>{const t=l.current;if(t&&""!==t.value){let s=(0,S.iy)();const a=s[t.value]&&confirm("This name already exists. Do you want to override?"),n=!s[t.value];if(a||n){s[t.value]={char:e.char.getCharObj(),enemy:e.enemy.getEnemyObj(),bonuses:T.M.toArray(e.bonuses)};const a=JSON.stringify(s);!function(e,t){try{localStorage.setItem(e,t)}catch(e){if("22"!==e.code&&"1024"!==e.code)return void alert("Can not save item. Code: "+e.code);alert("Not enough space to save. Please, free space to save")}}(S.Pc,a),c(w(s)),l.current.value="",o.current.textContent="Saved";const n=setTimeout((()=>{o.current.textContent="",clearTimeout(n)}),1500)}}},children:"Save"})]}),(0,a.jsxs)("div",{className:N.loadSection,children:[(0,a.jsxs)("select",{ref:r,className:N.loadSelector,disabled:0===s.length,defaultValue:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"-select setup-"}),s]}),(0,a.jsxs)("section",{className:N.loadSectionButtons,children:[(0,a.jsx)("button",{onClick:()=>{const e=r.current;let t=(0,S.iy)();if(!A(t)&&e.value&&""!==e.value&&confirm(`Selected setup "${e.value}" will be deleted. Are you sure?`)){delete t[e.value];const s=JSON.stringify(t);localStorage.setItem(S.Pc,s),c(w(t))}},children:"Delete"}),(0,a.jsx)("button",{onClick:()=>{const t=r.current;let s=(0,S.iy)();if(A(s)||!t.value||""===t.value)return;const{char:a,enemy:n,bonuses:c}=s[t.value],l=new y.zk(a.atkType,a.element,a.srcStat,a.stats,a.buffs),o=new b.C8(n.lvl,n.element,n.stats,n.debuffs,n.isBroken),i=new T.M(c);l&&o&&e.loadCallback(l,o,i)},children:"Load"})]})]}),(0,a.jsxs)("div",{className:N.importExportSection,children:[(0,a.jsx)("button",{onClick:async e=>{let t;try{t=await(0,S.Dq)(!1,600)}catch(e){return void console.log(e)}if(!t||!t[0])return;let s,a,n=(0,S.iy)();try{s=await(0,S.$4)(t[0])}catch(e){return void console.log(e)}if(!s||0===s.length)return void alert("There is nothing to import");try{a=JSON.parse(s)}catch(e){return void console.log("Wrong type of file!")}if(confirm('Do you want to SAVE all your previous setups?\n"OK" to ADD new setups, "Cancel" to CLEAR and ADD')){const e=confirm('Do you want to override setups on name conflict?\n"Cancel" to add with new names');for(const t in a){let s=t;e||(s=I(n,t)),n[s]=a[t]}}else{n={};for(const e in a)n[e]=a[e]}const l=JSON.stringify(n);localStorage.setItem(S.Pc,l),c(w(n))},children:"Import"}),(0,a.jsx)("button",{onClick:()=>{const e=(0,S.iy)();if(A(e))return;const t=JSON.stringify(e);let s=new File([t],"setups.json",{type:"text/plain:charset=UTF-8"});(0,S.Xo)(s)},children:"Export"}),(0,a.jsx)("button",{onClick:()=>localStorage.clear(),children:"Clear"})]})]})})),E=e=>{const[t,s]=(0,n.useState)([]),c=e=>{const a=e.currentTarget.value;if(!a)throw new Error("Invalid group type of bonus sets");t.includes(a)?s((e=>e.filter((e=>e!==a)))):s((e=>[...e,a]))},l=e.contents.map((e=>{const s=t.includes(e)?{border:"1px solid white"}:void 0;return(0,a.jsx)("button",{value:e,style:s,onClick:c,children:e[0].toUpperCase()+e.slice(1)},e)}));return(0,n.useEffect)((()=>{e.updateCallback(t)}),[t]),(0,a.jsx)("div",{className:"YomG6n9_",children:l})},D={bonusSetContainer:"pxYAhcR9",headerSection:"wnGHKlpt",titles:"f3b4cpMX",group:"RlYXbXFG",header:"F4yNleMb",controlButtonsSection:"Mc8ryBNI",controlButton:"zylh9UdU",compValuesSection:"zFRVSr4y",compValueBlock:"R9ddKN93",bonusesPreviewList:"K05DrzJz",bonus:"y7JHXhWu",activationButton:"XwK3XbMK",mainBlock:"VjRxZUdZ",mainRow:"nkVAC9tZ",bonusValue:"UPXGl1AZ"};var O=s(203);const V="Base:",R="Crit:",M="Avg:";function F(e){return{color:e>0?"greenyellow":"gray"}}function P(e){return function(e){return e>=0?"+":""}(e)+function(e,t=!0,s=2){return t?parseFloat((100*e).toFixed(s)).toString():e.toString()}(e)+"%"}const z=e=>{const[t,s]=(0,n.useState)(!0);let c=[];for(const t of e.set.items){const s=t.atkTypeOption&&"any"!==t.atkTypeOption&&"none"!==t.atkTypeOption?O.Z.en[t.atkTypeOption]:"",n=t.elemTypeOption&&"all"!==t.elemTypeOption&&"none"!=t.elemTypeOption?O.Z.en[t.elemTypeOption]:"",l=""===s&&""===n?"":`(${n} ${s})`,r=(0,d.hU)(t.key);let o=r?parseFloat((100*t.value).toFixed(1)):t.value;const i=t.comparisonValue[0],u=P(i),m=t.comparisonValue[1],p=P(m),h=t.comparisonValue[2],v=P(h),f=t.isActive?void 0:{backgroundColor:"darkred"};c.push((0,a.jsxs)("div",{className:D.bonus,children:[(0,a.jsxs)("div",{className:D.mainBlock,children:[(0,a.jsxs)("div",{className:D.mainRow,children:[(0,a.jsxs)("p",{className:D.bonusDesc,children:[O.Z.en[t.key]," ",l,":"]}),(0,a.jsxs)("p",{className:D.bonusValue,children:[o,r?"%":""]})]}),(0,a.jsxs)("div",{className:D.compValuesSection,children:[(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:V}),(0,a.jsx)("p",{className:D.compValues,style:F(i),children:u})]}),(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:R}),(0,a.jsx)("p",{className:D.compValues,style:F(m),children:p})]}),(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:M}),(0,a.jsx)("p",{className:D.compValues,style:F(h),children:v})]})]})]}),(0,a.jsx)("button",{className:D.activationButton,style:f,disabled:!e.set.isActive,onClick:s=>e.setActiveCallback(t.id),children:"👁"})]},t.key+t.id+"_bonus"))}const l=e.set.type,r=e.set.name,o=e.set.comparisonValue[0],i=P(o),u=e.set.comparisonValue[1],m=P(u),p=e.set.comparisonValue[2],h=P(p),v=e.set.isActive?e.set.items.some((e=>!e.isActive))?{backgroundColor:"gray"}:void 0:{backgroundColor:"darkred"},f={opacity:e.set.isActive?"1":"0.5"};return(0,a.jsxs)("div",{className:D.bonusSetContainer,children:[(0,a.jsxs)("div",{className:D.headerSection,children:[(0,a.jsxs)("div",{className:D.titles,children:[(0,a.jsxs)("p",{className:D.group,children:[O.Z.en[l],l?.length>0?":":""]}),(0,a.jsx)("p",{className:D.header,children:r})]}),(0,a.jsxs)("div",{className:D.controlButtonsSection,children:[(0,a.jsx)("button",{title:"Activate or deactivate this bonus",style:v,className:D.controlButton,onClick:t=>e.setActiveCallback(),children:"👁"},"deactivateButton"),(0,a.jsx)("button",{title:"Minimize or restore details",className:D.controlButton,onClick:e=>s((e=>!e)),children:"..."},"showHideButton"),(0,a.jsx)("button",{title:"Delete this bonus",className:D.controlButton,onClick:t=>e.deleteCallback(),children:"x"},"deleteButton")]})]}),(0,a.jsxs)("div",{className:D.compValuesSection,children:[(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:V}),(0,a.jsx)("p",{className:D.compValues,style:F(o),children:i})]}),(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:R}),(0,a.jsx)("p",{className:D.compValues,style:F(u),children:m})]}),(0,a.jsxs)("div",{className:D.compValueBlock,children:[(0,a.jsx)("p",{className:D.valueDescription,children:M}),(0,a.jsx)("p",{className:D.compValues,style:F(p),children:h})]})]}),t?(0,a.jsx)(n.Fragment,{}):(0,a.jsx)("div",{className:D.bonusesPreviewList,style:f,children:c})]})};var L=s(471),H=s(181),G=s(268);const K=e=>{const[t,s]=(0,n.useState)([]),c=(0,n.useRef)(null),l=(0,L.getStorageBonusSets)(),r=(0,n.useRef)(null),o=(t,s)=>a=>{function n(e){const t=c.items.find((t=>t.id===e));t&&(t.isActive=!t.isActive)}let c={...e.provider.getElement(t,s)};void 0===a?c.isActive=!c.isActive:Array.isArray(a)?a.forEach((e=>n(e))):n(a),e.updateCallback(e.provider.getWith(c,t,s))},i=(t,s)=>()=>{0!==s.length&&0!==t.length&&e.provider.hasElement(t,s)&&e.updateCallback(e.provider.getWithout(t,s))},u=(0,H.AA)(l,t)??[];let d=[];return e.provider.data.forEach(((e,s)=>{t&&!t.includes(s)&&0!==t.length||e.forEach(((e,t)=>{d.push((0,a.jsx)(z,{set:e,setActiveCallback:o(t,s),deleteCallback:i(t,s)},t))}))})),(0,a.jsxs)("div",{className:"AymoXQsh",children:[(0,a.jsx)("div",{className:"wnqXDxEQ",children:(0,a.jsx)("p",{className:"ImEHLTHY",children:"Bonuses:"})}),(0,a.jsxs)("div",{className:"VZ3hsHL4",children:[(0,a.jsxs)("select",{ref:c,className:"mkjP3Iwg",disabled:0===u.length,children:[(0,a.jsx)("option",{hidden:!0,value:"none",children:0===u.length?"-Create bonus set-":"-Select bonus sets-"},"option-none"),u]}),(0,a.jsxs)("div",{className:"quYbZ0SH",children:[(0,a.jsx)("button",{onClick:()=>{const t=c.current;if(t){const{groupName:s,name:a}=(0,H._K)(t);if(s&&a&&l.getElement(a,s)){const t=l.getElement(a,s),n=(0,G.Hy)(t,!0,[0,0,0]);n&&e.updateCallback(e.provider.getWith(n,a,s))}}},children:"Load"}),(0,a.jsx)("button",{onClick:()=>{0!==e.provider.data.size&&e.updateCallback(new T.M)},children:"Clear"})]})]}),(0,a.jsx)(E,{contents:["weapon","teammate","relics","planars"],updateCallback:e=>{s(e)}}),(0,a.jsx)("div",{ref:r,className:"s378RR0r",children:d})]})};var U=s(227),Z=s(543);const J="defaultUserSetup";(0,Z.N)();let X=function(){const e=localStorage.getItem(J);if(e){const t=JSON.parse(e),s=t.char,a=t.enemy,n=T.M.fromArray(t.bonuses);return{char:new y.zk(s.atkType,s.element,s.srcStat,s.stats,s.buffs),enemy:new b.C8(a.lvl,a.element,a.stats,a.debuffs,a.isBroken),bonuses:T.M.isTypes(n,U.F,G.Lx)?n:new T.M}}return{char:new y.zk,enemy:new b.C8,bonuses:new T.M}}();const $=()=>{const[e,t]=(0,n.useState)(X.char),[s,l]=(0,n.useState)(X.enemy),[r,o]=(0,n.useState)(X.bonuses);let u=(0,n.useRef)(e),d=(0,n.useRef)(s),m=(0,n.useRef)(r),p=(0,n.useRef)(null);function h(){const e={char:u.current?.getCharObj()??new y.zk,enemy:d.current?.getEnemyObj()??new b.C8,bonuses:m.current?T.M.toArray(m.current):[]};localStorage.setItem(J,JSON.stringify(e))}function v(e){t((()=>(setTimeout((()=>{}),1e3),e)))}function f(e){l((()=>e))}function x(t){k(e,s,t),o(t)}function k(e,t,s){const a=C(e,t,s),n=new T.M(s);n.data.forEach((s=>{s.forEach((s=>{if(s.isActive){s.isActive=!s.isActive;const c=C(e,t,n);s.isActive=!s.isActive,s.comparisonValue=[(a[0]-c[0])/c[0],(a[1]-c[1])/c[1],(a[2]-c[2])/c[2]].map((e=>Number.isNaN(e)?0:e))}else s.comparisonValue=[0,0,0];s.items.forEach((s=>{if(s.isActive){s.isActive=!s.isActive;const c=C(e,t,n);s.isActive=!s.isActive,s.comparisonValue=[(a[0]-c[0])/c[0],(a[1]-c[1])/c[1],(a[2]-c[2])/c[2]].map((e=>Number.isNaN(e)?0:e))}else s.comparisonValue=[0,0,0]}))}))}))}(0,n.useEffect)((()=>{u.current=e,d.current=s,m.current=r})),(0,n.useEffect)((()=>(window.addEventListener("beforeunload",(e=>{h()})),()=>{h(),X={char:u.current,enemy:d.current,bonuses:m.current}})),[]),(0,n.useEffect)((()=>{o((t=>(k(e,s,t),new T.M(t))))}),[e,s]),(0,n.useEffect)((()=>{if(p.current)return clearTimeout(p.current),p.current=setTimeout((()=>{h(),clearTimeout(p.current)}),5e3),()=>{clearTimeout(p.current),p.current=null};p.current=setTimeout((()=>{h(),clearTimeout(p.current)}),5e3)}),[r]);const N=C(e,s,r);return(0,a.jsx)("div",{className:"ehmjDA89",children:(0,a.jsxs)("div",{className:"amt11bt_",children:[(0,a.jsx)("div",{className:c,children:(0,a.jsx)(j,{char:e,onCharChanged:v})}),(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)(g,{enemy:s,onChangeCallback:f}),(0,a.jsx)(i,{result:N}),(0,a.jsx)(B,{char:e,enemy:s,bonuses:r,loadCallback:function(e,t,s){v(e),f(t),x(s)}})]}),(0,a.jsx)("div",{className:c,children:(0,a.jsx)(K,{provider:r,updateCallback:x})})]})})}}}]);
//# sourceMappingURL=46.6e5e153e3589cff48234.js.map